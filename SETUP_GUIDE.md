# Водич за постављање апликације - Управа зграде Скендера Кулновића 5

## 1. Почетни кораци

### Извршавање SQL скрипти

Апликација ће аутоматски направити све табеле при првом покретању, али можете и ручно извршити скрипти:

1. Идите на `scripts/` фолдер
2. Извршите скрипте редом:
   - `01-init-schema.sql` - Прави све табеле и безбедносне политике
   - `02-seed-apartments.sql` - Додаје твоја 29 станова подељена по спратовима

**Напомена**: Не требате ручно да га извршите. Апликација ће вас редиректовати на `/setup` странцу ако администратор не постоји.

---

## 2. Прва регистрација - Администратор (Иван Томић)

При отварању апликације:

1. Биће редиректован на `http://localhost:3000/setup`
2. Попуните форму са вашим подаци:
   - **Пуно име**: Иван Томић
   - **Email**: iva@primer.com (или ваш email)
   - **Лозинка**: Направи јаку лозинку (мин. 6 карактера)
   - **Потврди лозинку**: Исто као изнад
3. Кликните "Направи администраторски налог"
4. След успеха, бићете редиректовани на пријаву

---

## 3. Пријава

1. Идите на `http://localhost:3000/auth/signin`
2. Унесите ваш Email и лозинку
3. Кликните "Пријавите се"
4. Биће редиректовани на администраторску контролну таблицу

---

## 4. Креирање Demo налога за станара

Као администратор, направите демо налог за тестирање:

### Корак 1: Генериши код позива

1. Идите на админ панел → "Станари"
2. Кликните на "Генериши код"
3. Одаберите стан (нпр. Стан 1 - Спрат 1)
4. Кликните "Генериши"
5. Копирајте генерисани код (изгледа као: `ABC12XYZ`)

### Корак 2: Регистрација станара

1. Отворите нови браузер или прозор (приватан прозор)
2. Идите на `http://localhost:3000/auth/signup`
3. Унесите следеће:
   - **Код позива**: Залепите код из корака 1
   - **Пуно име**: Јован Јовановић (или друго име)
   - **Email**: jovan@primer.com
   - **Лозинка**: 123456
4. Кликните "Региструј се"
5. Биће редиректовани на пријаву

### Корак 3: Пријава као станар

1. На пријави унесите:
   - **Email**: jovan@primer.com
   - **Лозинка**: 123456
2. Кликните "Пријавите се"
3. Видећете станарски портал са информацијама о стану и плаћањима

---

## 5. Тестирање функционалности

### За администратора:

- **Контролна табличка** - Видите укупна станова, активне станаре, дугове, наплаћено овај месец
- **Станари** - Управљање станарима, генерисање кодова позива
- **Плаћања** - Додајте плаћања станара, видите историју
- **Извештаји** - Анализа по месецима, по спратовима, дугови
- **Подешавања** - Видите ваш администраторски налог

### За станара:

- **Мој стан** - Информације о вашем стану (број, спрат, површина, месечна наплата) и текуће стање
- **Плаћања** - Историја вашег плаћања
- **Трошкови** - Разбијеност трошкова зграде

---

## 6. Додавање плаћања (администратор)

1. Идите на "Плаћања"
2. Кликните "Додај плаћање"
3. Попуните:
   - **Стан**: Одаберите стан
   - **Износ**: Унесите износ (нпр. 0.20 за месечну наплату)
   - **Датум плаћања**: Данашњи датум
   - **Месец/Година**: Текући месец
   - **Метод плаћања**: Трансфер, Готовина, Чек или Друго
   - **Напомена**: Опционално
4. Кликните "Сачувај плаћање"

Станар ће видети ово плаћање у својој историји плаћања.

---

## 7. Додавање трошкова (администратор)

1. Идите на "Плаћања" → "Додај трошак" (или из извештаја)
2. Попуните:
   - **Назив**: нпр. "Поправка крова"
   - **Износ**: Укупна цена
   - **Категорија**: Поправке, Одржавање, Комунално, Чишћење, Друго
   - **Датум**: Датум трошка
   - **Месец/Година**: За који месец је трошак
   - **Опис**: Детаљи трошка
3. Кликните "Сачувај трошак"

Сви станари ће видети овај трошак на "Трошкови" картици.

---

## 8. Извештаји

Као администратор, можете видети детаљне извештаје:

1. Идите на "Извештаји"
2. Одаберите месец и годину
3. Видећете:
   - Очекивани приход (укупно станова × 0.20 BAM)
   - Наплаћено (укупан износ плаћања)
   - Процент наплате
   - Дугови (станари који нису плаћали)
   - График по спратовима
   - Листа дугова са станарима
4. Кликните "Преузми CSV" за извоз извештаја

---

## 9. Локално тестирање

\`\`\`bash
# Инсталирајте зависности
npm install

# Покрените развојни сервер
npm run dev

# Отворите браузер на
http://localhost:3000
\`\`\`

---

## 10. Чеклист за развој

- [ ] Извршите SQL скрипти (или аутоматски при регистрацији администратора)
- [ ] Направите администраторски налог на /setup странци
- [ ] Пријавите се као администратор
- [ ] Генеришите код позива за демо станара
- [ ] Направите демо станарски налог са кодом
- [ ] Пријавите се као станар и видите портал
- [ ] Тестирајте додавање плаћања
- [ ] Тестирајте додавање трошкова
- [ ] Тестирајте генерисање извештаја
- [ ] Преузмите CSV извештај

---

## 11. Деплоирање на Vercel

Када буде време за деплоирање:

\`\`\`bash
# Пуш на GitHub
git push origin main

# Повежите са Vercel
vercel

# Пратите упутства
\`\`\`

Окружења за Supabase ће бити постављена аутоматски преко Vercel Integration.

---

## 12. Честа питања

**П: Шта је код позива?**
О: Јединствен код који администратор генерише за сваког станара. Станар га користи при регистрацији и веже се аутоматски на свој стан.

**П: Могу ли да видим чиј је стан без кода позива?**
О: Не. Код позива аутоматски везује станара на стан при регистрацији.

**П: Могу ли да брисем станаре?**
О: Укупна база је подесена да буде безбедна. За слад бришање, контактирајте администратора.

**П: Шта је лата наплата?**
О: Износ који дугује станар ако није плаћен за месец. Тренутно није аутоматизовано, али можете ручно додати као посебну наплату.

---

Срећно са апликацијом!
